---
description:
globs:
alwaysApply: false
---
# 控制台管理界面指南

## 控制台服务
[Services/ConsoleCommandService.cs](mdc:Services/ConsoleCommandService.cs) 提供本地命令行管理界面。

## 支持的命令

### 📋 信息查询命令
- **help, h** - 显示帮助信息
- **status, s** - 显示节点状态和性能信息
- **list, l** - 显示所有运行中的服务器列表
- **info <id>** - 显示指定服务器的详细信息
- **node** - 显示节点信息 (同 status)

### 🎮 服务器管理命令
- **start <id> <map>** - 启动新的游戏服务器
  - 示例: `start server1 world1`
- **stop <id> [force]** - 停止指定服务器
  - 示例: `stop server1` 或 `stop server1 force`

### 🔧 系统命令
- **clear, cls** - 清屏并重新显示欢迎信息
- **exit, quit, q** - 退出程序

## 命令处理流程

### 🔄 命令解析
1. 读取用户输入
2. 按空格分割参数
3. 提取命令名称 (第一个参数)
4. 调用相应的处理方法

### 📊 状态显示
- 节点信息: CPU/内存使用率、运行服务器数量
- 服务器列表: 表格形式显示 ID、名称、地图、端口、状态
- 服务器详情: 完整的服务器配置和运行信息

## 事件处理

### 🔔 连接状态通知
- SignalR 连接成功/失败时显示通知
- 自动更新命令提示符状态

### ⚡ 异步命令执行
- 所有命令都是异步执行
- 长时间运行的命令不会阻塞界面
- 错误处理和用户友好的错误消息

## 扩展控制台功能

### 📦 添加新命令
1. 在 `ProcessCommandAsync()` 方法中添加新的 case
2. 实现对应的处理方法
3. 在 `ShowHelp()` 中添加命令说明

### 🎨 自定义显示格式
- 修改表格列宽和对齐方式
- 添加颜色输出 (使用 Console.ForegroundColor)
- 自定义状态图标和符号

## 用户体验
- 友好的欢迎信息和帮助文档
- 清晰的命令语法提示
- 实时的连接状态显示
- 错误信息的中文本地化
